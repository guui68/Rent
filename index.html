<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ভাড়ার ডিজিটাল রশিদ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body { font-family: 'Arial', sans-serif; background: #555; padding: 20px; }
        /* রশিদের মূল ডিজাইন */
        .invoice-card { 
            max-width: 600px; 
            background: #fff; 
            margin: auto; 
            padding: 40px; 
            border: 1px solid #000;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            position: relative;
        }
        .header { text-align: center; border-bottom: 2px double #000; margin-bottom: 20px; }
        .header h1 { margin: 0; font-size: 28px; text-transform: uppercase; }
        
        .info-section { margin-bottom: 20px; line-height: 2; }
        .info-section div { display: flex; border-bottom: 1px dotted #000; margin-bottom: 10px; }
        .info-section label { font-weight: bold; width: 120px; }
        
        /* ইনপুট বক্সগুলো যাতে বর্ডারহীন দেখায় */
        input { border: none; outline: none; width: 100%; font-size: 16px; font-family: inherit; background: transparent; }
        
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        table th, table td { border: 1px solid #000; padding: 10px; text-align: left; }
        .text-right { text-align: right; }

        .footer-sign { margin-top: 50px; display: flex; justify-content: space-between; }
        .btn-area { text-align: center; margin-top: 20px; }
        
        .download-btn { 
            background: #e74c3c; color: #fff; padding: 15px 30px; 
            border: none; border-radius: 5px; cursor: pointer; font-size: 18px; 
        }

        /* পিডিএফ এ বাটন লুকানোর জন্য */
        @media print { .btn-area { display: none; } }
    </style>
</head>
<body>

<div class="invoice-card" id="receipt">
    <div class="header">
        <h1>ভাড়ার রশিদ</h1>
        <p>ভাড়াটিয়ার কপি</p>
    </div>

    <div class="info-section">
        <div><label>তারিখঃ</label> <input type="text" placeholder="দিন/মাস/বছর"></div>
        <div><label>ভাড়াটিয়ার নামঃ</label> <input type="text" placeholder="নাম লিখুন"></div>
    </div>

    <table>
        <thead>
            <tr>
                <th>বিবরণ</th>
                <th class="text-right">টাকা</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>মাসিক বাড়ি ভাড়া</td>
                <td><input type="number" class="amount" oninput="calculate()" value="0"></td>
            </tr>
            <tr>
                <td>বিদ্যুৎ বিল</td>
                <td><input type="number" class="amount" oninput="calculate()" value="0"></td>
            </tr>
            <tr>
                <td>WIFI বিল</td>
                <td><input type="number" class="amount" oninput="calculate()" value="0"></td>
            </tr>
            <tr>
                <td>অন্যান্য বিল</td>
                <td><input type="number" class="amount" oninput="calculate()" value="0"></td>
            </tr>
            <tr style="color: blue; font-weight: bold;">
                <td>(-) জমা / অগ্রিম</td>
                <td><input type="number" id="advance" oninput="calculate()" value="0"></td>
            </tr>
            <tr>
                <th class="text-right">মোট টাকা (নিট):</th>
                <th class="text-right" style="background: #eee;"><span id="total-val">0</span> ৳</th>
            </tr>
        </tbody>
    </table>

    <div class="footer-sign">
        <p style="border-top: 1px solid #000; padding-top: 5px;">ভাড়াটিয়ার স্বাক্ষর</p>
        <p style="border-top: 1px solid #000; padding-top: 5px;">মালিকের স্বাক্ষর</p>
    </div>
</div>

<div class="btn-area">
    <button class="download-btn" onclick="makePDF()">রশিদ ডাউনলোড করুন (PDF)</button>
</div>

<script>
    function calculate() {
        let fields = document.getElementsByClassName('amount');
        let total = 0;
        for (let i = 0; i < fields.length; i++) {
            total += parseFloat(fields[i].value) || 0;
        }
        let adv = parseFloat(document.getElementById('advance').value) || 0;
        document.getElementById('total-val').innerText = (total - adv);
    }

    function makePDF() {
        const element = document.getElementById('receipt');
        
        // বর্তমান ভ্যালুগুলো স্থায়ীভাবে সেট করা যাতে পিডিএফে দেখা যায়
        const inputs = element.querySelectorAll('input');
        inputs.forEach(input => {
            input.setAttribute('value', input.value);
        });

        const opt = {
            margin: 0.5,
            filename: 'Rent_Receipt.pdf',
            image: { type: 'jpeg', quality: 1 },
            html2canvas: { scale: 3 },
            jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
        };
        html2pdf().from(element).set(opt).save();
    }
</script>

</body>
</html>
